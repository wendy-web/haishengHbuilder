<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>异步promise的编程</title>
</head>
<body>
  <div id="app">前后端的交互</div>
  <script type="text/javascript" src="js/vue.js"></script>
  <script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
	/*
		Fetch API的使用
	*/
	fetch('http://localhost:3000/fdata').then(function(data){
		// text()方法属于fetchAPI的一部分,它返回一个promise的实例对象,用于获取后台返回的数据
		return data.text()
	}).then(function(data){
		console.log(data)
	})
	
	
	// GET传递参数-传统的URL 用?id=123
	fetch('http://localhost:3000/books?id=123', {
		method:'get'
	})
		.then(function(data){
			return data.text()
		})
		.then(function(data) {
			console.log(data)
		})
	// GET参数传递-restful形式的URL 直接在url的后面/456
	fetch('http://localhost:3000/books/456', {
		method:'get'
	})
		.then(function(data){
			return data.text()
		})
		.then(function(data) {
			console.log(data)
		})
		
	// DELETE请求方式参数传递
	fetch('http://localhost:3000/books/789', {
	  method: 'delete'
	})
	  .then(function(data){
	    return data.text();
	  }).then(function(data){
	    console.log(data)
	  });
	  
	// POST请求传参
	fetch('http://localhost:3000/books', {
	  method: 'post',
	  body: 'uname=lisi&pwd=123',
	  headers: {
	    'Content-Type': 'application/x-www-form-urlencoded'
	  }
	})
	  .then(function(data){
	    return data.text();
	  }).then(function(data){
	    console.log(data)
	  });
	  
	  // POST请求传参 JSON.stringify传递数组
	  fetch('http://localhost:3000/books', {
		method: 'post',
		body: JSON.stringify({
		  uname: '张三',
		  pwd: '456'
		}),
		headers: {
		  'Content-Type': 'application/json'
		}
	  })
		.then(function(data){
		  return data.text();
		}).then(function(data){
		  console.log(data)
		});
		
	// PUT请求传参
	fetch('http://localhost:3000/books/123', {
	  method: 'put',
	  body: JSON.stringify({
	    uname: '张三',
	    pwd: '789'
	  }),
	  headers: {
	    'Content-Type': 'application/json'
	  }
	})
	  .then(function(data){
	    return data.text();
	  }).then(function(data){
	    console.log(data)
	  });
  </script>
</body>
</html>
